---
layout: post
title:  "L4-Load-balancing"
date:   2017-09-13 08:00:00
author: minguss
categories: devlog network
tags: network
---


네트워크 구성 중 L4 스위치에 대해서 잘 몰라서 공부한 내용을 기록했습니다.  
자세하게 서술하기에는 너무 많아서 업무적으로 알아야 하는 내용만 기록해봅니다.  

먼저 계층에 따른 스위칭 방식은 아래와 같습니다.
![Swiching](http://cfile9.uf.tistory.com/image/265BE9375880328116DF0A)

계층에 따른 자세한 내용은 http://soul0.tistory.com/140 를 참고하면 좋겠습니다.

먼저 저는 L4 스위치가 네트워크에서 사용하는 다른 용어인 줄 알았는데, 결국 OSI 7계층 내용이더군요.  
물-데-네-전-세-표-응 이렇게 외우는 것 밖에 안해서 실제로 무슨말인지 몰랐는데, 이제 이해를 하게 되었네요.  

이래서 컴퓨터공학 정규과정에 포함이 되어있었나 봅니다. 개발할 때 필요하니까요.  
네트워크 안한다고 소홀히 할 부분이 아니었네요 ^-ㅜ

아무튼 L4는 전송 계층으로 핵심은 'IP, 포트, 세션'을 기반으로한 로드밸런싱(Load Balancing)입니다.  

로드밸런싱은, 동일한 역할을 수행하는 서버 그룹을 VIP를 통해 관리하며, 서버로 향하는 트래픽을 일단 VIP를 가진 L4스위치로 수신한 후 분배정책에 따라 적절한 서버에 분배해 주는 것을 말합니다.  

VIP는 Virtual IP의 약자로, 서버그룹의 대표 IP라 할 수 있습니다.  
이 VIP를 로드밸런싱을 수행하는 L4 스위치가 가지고 있습니다.  
서버와 통신하고자 하는 클라이언트는 VIP를 향해 트래픽을 전송하고 L4스위치가 이 트래픽을 받아 적절한 서버에 로드밸런싱 해주는 것이 L4스위치의 역할입니다.  

한마디로, L4 스위치는 부하분산 장비입니다. 요즘 어느정도 규모의 사이트는 서버 한 대로 사용자들의 트래픽을 감당하기 어렵기 떄문에 동일한 역할을 수행하는 서버를 여러 대 두어서 사용자들의 트래픽이 많아져도 유연하고 안정적으로 사이트를 운영하기 위해 L4스위치를 통한 로드밸런싱을 하고 있습니다.  

L4스위치, 즉 로드밸런서가 없어도 네트워크를 하는데 지장은 없지만, 트래픽이 과도해지면서 로드밸런서 없이는 안정적인 네트워크를 구성하는것이 힘듭니다.  

때문에 L4 스위치를 이용한 로드밸런싱은 필수아닌 필수가 되었습니다.


Reference:[한길만님 블로그](http://blog.naver.com/dfoal/70055888148)